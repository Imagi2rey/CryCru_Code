{"ast":null,"code":"var _jsxFileName = \"/home/kali/test3/crycru/src/components/CoinPage.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { FaStar, FaRegStar, FaCircleNotch, FaArrowUp, FaArrowDown } from 'react-icons/fa';\nimport { editCoin } from '../actions/coins';\nimport { addFavorite, removeFavorite } from '../actions/favorites';\nimport CoinChart from './CoinChart';\nimport CoinDetails from './CoinDetails';\nimport CoinNews from './CoinNews';\nimport { formatNumber } from '../utilities/numbers';\n\nconst cc = require('cryptocompare');\n\ncc.setApiKey(process.env.REACT_APP_CRYPTO_COMPARE_API_KEY);\n\nclass CoinPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.componentDidMount = () => {\n      if (this.props.coins.length > 0) {\n        this.fetchCoinPrice(this.props.match.params.symbol);\n      }\n    };\n\n    this.componentDidUpdate = () => {\n      if (this.props.coins.length > 0) {\n        this.fetchCoinPrice(this.props.match.params.symbol);\n      }\n    };\n\n    this.fetchCoinPrice = symbol => {\n      const coin = this.props.coins.find(coin => coin.symbol === symbol);\n\n      if (!coin.hasOwnProperty('changeDay')) {\n        const currency = 'USD';\n        cc.priceFull(symbol, [currency]).then(price => {\n          this.props.editCoin(symbol, {\n            price: price[symbol][currency].PRICE,\n            changeDay: price[symbol][currency].CHANGEDAY,\n            changePctDay: price[symbol][currency].CHANGEPCTDAY,\n            mktCap: price[symbol][currency].MKTCAP,\n            totalVol24hr: price[symbol][currency].VOLUMEDAY,\n            supply: price[symbol][currency].SUPPLY,\n            high24hr: price[symbol][currency].HIGH24HOUR,\n            low24hr: price[symbol][currency].LOW24HOUR\n          });\n        }).catch(console.error);\n      }\n    };\n\n    this.onAddFavorite = e => {\n      this.props.addFavorite(e.target.id);\n    };\n\n    this.onRemoveFavorite = e => {\n      this.props.removeFavorite(e.target.id);\n    };\n  }\n\n  render() {\n    const coin = this.props.coins.find(coin => coin.symbol === this.props.match.params.symbol);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }\n    }, coin ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"grid-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"coin__header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"coin__info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"coin__title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"coin__logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: `http://cryptocompare.com/${coin.imageUrl}`,\n      alt: \"coin logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 19\n      }\n    }, coin.name), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"coin__symbol\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 19\n      }\n    }, \"(\", coin.symbol, \")\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"coin__price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"light-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }, \"$\"), coin.price > .01 ? formatNumber(coin.price.toFixed(2)) : coin.price.toFixed(5), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"coin__change\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }, coin.changePctDay > 0 ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"green-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FaArrowUp, {\n      size: \"1.4rem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 50\n      }\n    }), coin.changePctDay.toFixed(2), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"light-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 107\n      }\n    }, \"%\")) : coin.changePctDay < 0 ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"red-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FaArrowDown, {\n      size: \"1.4rem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 50\n      }\n    }), coin.changePctDay.toFixed(2) * -1, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"light-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 114\n      }\n    }, \"%\")) : /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 23\n      }\n    }, coin.changePctDay.toFixed(2), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"light-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 59\n      }\n    }, \"%\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"coin__favorite\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, this.props.favorites.includes(coin.symbol) ? /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"add-favorite\",\n      id: coin.symbol,\n      onClick: this.onRemoveFavorite,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FaStar, {\n      size: \"2.4rem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 113\n      }\n    }), \"Remove Favorite\") : /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"add-favorite\",\n      id: coin.symbol,\n      onClick: this.onAddFavorite,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FaRegStar, {\n      size: \"2.4rem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 110\n      }\n    }), \"Add to Favorites\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"coin__chart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CoinChart, {\n      symbol: coin.symbol,\n      title: coin.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(CoinDetails, {\n      coin: coin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"coin__aside\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }\n    }, coin.name, \" News\"), this.props.match.params.symbol && /*#__PURE__*/React.createElement(CoinNews, {\n      categories: [this.props.match.params.symbol],\n      showBody: false,\n      results: 5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 50\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loading__notificaton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    }, \"Loading coin data\", /*#__PURE__*/React.createElement(FaCircleNotch, {\n      size: \"2.4rem\",\n      className: \"fa-spin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 66\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  coins: state.coins,\n  favorites: state.favorites\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addFavorite: favorite => dispatch(addFavorite(favorite)),\n  removeFavorite: favorite => dispatch(removeFavorite(favorite)),\n  editCoin: (symbol, updates) => dispatch(editCoin(symbol, updates))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CoinPage);","map":{"version":3,"sources":["/home/kali/test3/crycru/src/components/CoinPage.js"],"names":["React","connect","FaStar","FaRegStar","FaCircleNotch","FaArrowUp","FaArrowDown","editCoin","addFavorite","removeFavorite","CoinChart","CoinDetails","CoinNews","formatNumber","cc","require","setApiKey","process","env","REACT_APP_CRYPTO_COMPARE_API_KEY","CoinPage","Component","componentDidMount","props","coins","length","fetchCoinPrice","match","params","symbol","componentDidUpdate","coin","find","hasOwnProperty","currency","priceFull","then","price","PRICE","changeDay","CHANGEDAY","changePctDay","CHANGEPCTDAY","mktCap","MKTCAP","totalVol24hr","VOLUMEDAY","supply","SUPPLY","high24hr","HIGH24HOUR","low24hr","LOW24HOUR","catch","console","error","onAddFavorite","e","target","id","onRemoveFavorite","render","imageUrl","name","toFixed","favorites","includes","mapStateToProps","state","mapDispatchToProps","dispatch","favorite","updates"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport { FaStar, FaRegStar, FaCircleNotch, FaArrowUp, FaArrowDown } from 'react-icons/fa'\nimport { editCoin } from '../actions/coins'\nimport { addFavorite, removeFavorite } from '../actions/favorites'\nimport CoinChart from './CoinChart'\nimport CoinDetails from './CoinDetails'\nimport CoinNews from './CoinNews'\nimport { formatNumber } from '../utilities/numbers'\n\nconst cc = require('cryptocompare')\ncc.setApiKey(process.env.REACT_APP_CRYPTO_COMPARE_API_KEY)\n\nclass CoinPage extends React.Component {\n  componentDidMount = () => {\n    if (this.props.coins.length > 0) {\n      this.fetchCoinPrice(this.props.match.params.symbol)\n    }\n  }\n  componentDidUpdate = () => {\n    if (this.props.coins.length > 0) {\n      this.fetchCoinPrice(this.props.match.params.symbol)\n    }\n  }\n  fetchCoinPrice = (symbol) => {\n    const coin = this.props.coins.find(coin => coin.symbol === symbol)\n    if (!coin.hasOwnProperty('changeDay')) {\n      const currency = 'USD';\n      cc.priceFull(symbol, [currency]).then(price => {\n        this.props.editCoin(symbol, {\n          price: price[symbol][currency].PRICE,\n          changeDay: price[symbol][currency].CHANGEDAY,\n          changePctDay: price[symbol][currency].CHANGEPCTDAY,\n          mktCap: price[symbol][currency].MKTCAP,\n          totalVol24hr: price[symbol][currency].VOLUMEDAY,\n          supply: price[symbol][currency].SUPPLY,\n          high24hr: price[symbol][currency].HIGH24HOUR,\n          low24hr: price[symbol][currency].LOW24HOUR\n        })\n      }).catch(console.error)\n    }\n  }\n  onAddFavorite = (e) => {\n    this.props.addFavorite(e.target.id)\n  }\n  onRemoveFavorite = (e) => {\n    this.props.removeFavorite(e.target.id)\n  }\n  render() {\n    const coin = this.props.coins.find(coin => coin.symbol === this.props.match.params.symbol)\n    return (\n      <div className=\"content-container\">\n        {coin ? (\n          <div className=\"grid-container\">\n            <div className=\"coin__header\">\n              <div className=\"coin__info\">\n                <div className=\"coin__title\">\n                  <div className=\"coin__logo\">\n                    <img src={`http://cryptocompare.com/${coin.imageUrl}`} alt=\"coin logo\" />\n                  </div>\n                  <h1>{coin.name}</h1>\n                  <span className=\"coin__symbol\">({coin.symbol})</span>\n                </div>\n              </div>\n              <div className=\"coin__price\">\n                <span className=\"light-text\">$</span>\n                {coin.price > .01 ? (\n                  formatNumber(coin.price.toFixed(2))\n                ) : (\n                  coin.price.toFixed(5)\n                )}\n                <div className=\"coin__change\">\n                  {coin.changePctDay > 0 ? (\n                    <span className=\"green-text\"><FaArrowUp size=\"1.4rem\" />{coin.changePctDay.toFixed(2)}<span className=\"light-text\">%</span></span>\n                  ) : (\n                    coin.changePctDay < 0 ? (\n                      <span className=\"red-text\"><FaArrowDown size=\"1.4rem\" />{coin.changePctDay.toFixed(2) * -1}<span className=\"light-text\">%</span></span>\n                    ) : (\n                      <span>{coin.changePctDay.toFixed(2)}<span className=\"light-text\">%</span></span>\n                    )\n                  )}\n                </div>\n              </div>\n            </div>\n            <div className=\"coin__favorite\">\n              {this.props.favorites.includes(coin.symbol) ? (\n                <button type=\"button\" className=\"add-favorite\" id={coin.symbol} onClick={this.onRemoveFavorite}><FaStar size=\"2.4rem\" />Remove Favorite</button>\n              ) : (\n                <button type=\"button\" className=\"add-favorite\" id={coin.symbol} onClick={this.onAddFavorite}><FaRegStar size=\"2.4rem\" />Add to Favorites</button>\n              )}\n            </div>\n            <div className=\"coin__chart\">\n              <CoinChart symbol={coin.symbol} title={coin.name} />\n              <CoinDetails coin={coin} />\n            </div>\n            <div className=\"coin__aside\">\n              <h3>{coin.name} News</h3>\n              {this.props.match.params.symbol && <CoinNews categories={[this.props.match.params.symbol]} showBody={false} results={5} />}\n            </div>\n          </div>\n        ) : (\n          <div className=\"loading__notificaton\">Loading coin data<FaCircleNotch size=\"2.4rem\" className=\"fa-spin\" /></div>\n        )}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  coins: state.coins,\n  favorites: state.favorites\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  addFavorite: (favorite) => dispatch(addFavorite(favorite)),\n  removeFavorite: (favorite) => dispatch(removeFavorite(favorite)),\n  editCoin: (symbol, updates) => dispatch(editCoin(symbol, updates))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CoinPage)\n"]},"metadata":{},"sourceType":"module"}